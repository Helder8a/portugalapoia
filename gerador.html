<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Anúncios - PortugalApoia</title>
    <style>
        :root { --color-primary: #0A3D62; --color-accent: #00834B; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: #f8f9fa; color: #333; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; padding: 25px; background-color: #fff; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.07); }
        h1, h2 { color: var(--color-primary); }
        .form-group { margin-bottom: 20px; }
        label { display: block; font-weight: 600; margin-bottom: 8px; }
        input[type="text"], select, textarea { width: 98%; padding: 12px; border: 1px solid #ccc; border-radius: 4px; font-size: 1em; }
        .btn { display: block; width: 100%; padding: 15px; border: none; border-radius: 5px; cursor: pointer; font-weight: 700; font-size: 1.1em; color: white; background-color: var(--color-accent); transition: background-color 0.3s ease; }
        #resultado { margin-top: 25px; }
        #codigo-gerado { width: 98%; min-height: 250px; margin-top: 10px; font-family: monospace; background: #e9ecef; border: 1px solid #ccc; white-space: pre; overflow-wrap: normal; overflow-x: scroll; }
        .image-preview { margin-top: 10px; display: flex; align-items: center; gap: 15px; background: #f1f1f1; padding: 10px; border-radius: 4px; min-height: 70px; }
        .image-preview img { max-width: 70px; max-height: 70px; border-radius: 4px; border: 1px solid #ddd; display: none; }
        .image-preview span { font-family: monospace; color: #555; }
    </style>
</head>
<body>

    <div class="container">
        <h1>Gerador de Anúncios</h1>
        <p>Preencha os campos abaixo para criar o código HTML de um novo anúncio. Depois, copie o código gerado e cole-o no arquivo .html correspondente (ex: `empregos.html`).</p>

        <div class="form-group">
            <label for="tipoAnuncio">1. Qual o tipo de anúncio?</label>
            <select id="tipoAnuncio">
                <option value="emprego">Vaga de Emprego</option>
                <option value="servico">Oferta de Serviço</option>
                <option value="habitacao">Oferta de Habitação</option>
                <option value="doacao">Pedido de Doação</option>
            </select>
        </div>

        <div class="form-group">
            <label for="titulo">2. Título do Anúncio</label>
            <input type="text" id="titulo" placeholder="Ex: Ajudante Familiar">
        </div>

        <div class="form-group">
            <label for="descricao">3. Descrição</label>
            <textarea id="descricao" rows="4" placeholder="Ex: Ajudante Familiar para Serviço Interno na zona de Cascais."></textarea>
        </div>

        <div class="form-group">
            <label for="imagemUrl">4. Imagem (escreva o caminho completo)</label>
            <input type="text" id="imagemUrl" placeholder="Ex: img_servicos_personales/limpeza.png" oninput="atualizarPreview()">
            <div class="image-preview">
                <img id="preview" alt="Miniatura">
                <span id="preview-text">A miniatura da imagem aparecerá aqui se o caminho estiver correto.</span>
            </div>
        </div>

        <div class="form-group">
            <label for="cidade">5. Cidade / Localização</label>
            <input type="text" id="cidade" placeholder="Ex: Lisboa">
        </div>

        <div class="form-group">
            <label for="contacto">6. Contacto</label>
            <input type="text" id="contacto" placeholder="Ex: Tel. <a href='tel:+3519...'>9...</a> ou Email: <a href='mailto:...'>...</a>">
        </div>
        
        <button class="btn" onclick="gerarCodigo()">Gerar Código do Anúncio</button>

        <div id="resultado">
            <h2>Código Gerado:</h2>
            <textarea id="codigo-gerado" readonly onclick="this.select()"></textarea>
        </div>
    </div>

    <script>
        function atualizarPreview() {
            const path = document.getElementById('imagemUrl').value.trim();
            const previewImg = document.getElementById('preview');
            const previewText = document.getElementById('preview-text');
            
            if (path) {
                previewImg.src = path;
                previewImg.style.display = 'block';
                previewImg.onerror = function() {
                    previewImg.style.display = 'none';
                    previewText.textContent = `IMAGEM NÃO ENCONTRADA: Verifique se o caminho "${path}" está correto.`;
                };
                previewImg.onload = function() {
                    previewText.textContent = `Nome do arquivo: ${path.split('/').pop()}`;
                };
            } else {
                previewImg.style.display = 'none';
                previewText.textContent = 'A miniatura da imagem aparecerá aqui se o caminho estiver correto.';
            }
        }

        function gerarCodigo() {
            const tipo = document.getElementById('tipoAnuncio').value;
            const titulo = document.getElementById('titulo').value;
            const descricao = document.getElementById('descricao').value;
            const imagemUrl = document.getElementById('imagemUrl').value;
            const cidade = document.getElementById('cidade').value;
            const contacto = document.getElementById('contacto').value;
            
            if (!titulo || !descricao) {
                alert("Por favor, preencha pelo menos o Título e a Descrição.");
                return;
            }

            let cardClass = 'card-causa';
            let tagHTML = '';
            
            switch(tipo) {
                case 'emprego':
                    tagHTML = `<span class="card-tag card-tag-emprego">Vaga de Emprego</span>`;
                    break;
                case 'servico':
                    tagHTML = `<span class="card-tag card-tag-servico">Serviço</span>`;
                    break;
                case 'habitacao':
                     tagHTML = `<span class="card-tag card-tag-servico">Habitação</span>`;
                    break;
                case 'doacao':
                    tagHTML = `<span class="card-tag card-tag-artigos">Pedido de Artigos</span>`;
                    cardClass += ' text-only'; // Doações não têm imagem
                    break;
            }

            const cardId = `#${tipo.substring(0,3).toUpperCase()}-XXX`; // Placeholder para o ID
            const imagemHTML = tipo !== 'doacao' ? `<div class="card-image-container"><img src="${imagemUrl}" alt="${titulo}" class="card-image" loading="lazy"></div>` : '';

            const codigo = `
                    <div class="${cardClass}" data-city="${cidade}">
                        ${imagemHTML}
                        <div class="card-header">
                            ${tagHTML}
                            <span class="card-id">${cardId}</span>
                        </div>
                        <div class="card-content">
                            <h3 class="card-title">${titulo}</h3>
                            <p class="card-description">${descricao}</p>
                            <p class="card-description">${contacto}</p>
                        </div>
                    </div>
            `;
            
            const outputElement = document.getElementById('codigo-gerado');
            outputElement.value = codigo.trim().replace(/^ +/gm, '    ');
            alert("Código gerado! Agora pode copiar o texto da caixa de baixo.");
        }
    </script>
</body>
</html>